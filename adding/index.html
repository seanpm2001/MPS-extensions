<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Extensions and utilities for MPS">  
    <link rel="canonical" href="https://jetbrains.github.io/MPS-extensions/adding/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    
    <title>Adding - MPS Extensions</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/3.003/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../css/base.min.css" rel="stylesheet">
    <link href="../css/cinder.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.min.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.6.28/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="..">MPS Extensions</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../building/">Building</a>
                    </li>
                
                
                
                    <li >
                        <a href="../contributing/">Contributing</a>
                    </li>
                
                
                
                    <li >
                        <a href="../Migrating/">Migrating</a>
                    </li>
                
                
                
                    <li class="active">
                        <a href="./">Adding</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extensions <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../extensions/all/">Full Extension List</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Base Language Extensions</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../extensions/bl-extensions/structure-check/">Structure Check</a>
</li>

        
            
<li >
    <a href="../extensions/bl-extensions/blutil/">Base Language Util (blutil)</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Editor</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../extensions/editor/celllayout/">Cell Layout</a>
</li>

        
            
<li >
    <a href="../extensions/editor/conditional-editor/">Conditional Editor</a>
</li>

        
            
<li >
    <a href="../extensions/editor/diagrams/">Diagrams</a>
</li>

        
            
<li >
    <a href="../extensions/editor/grammar-cells/">Grammar Cells</a>
</li>

        
            
<li >
    <a href="../extensions/editor/math/">Math</a>
</li>

        
            
<li >
    <a href="../extensions/editor/mouse-selection/">Intentions for custom selections</a>
</li>

        
            
<li >
    <a href="../extensions/editor/multiline/">Multiline</a>
</li>

        
            
<li >
    <a href="../extensions/editor/querylist/">Query List</a>
</li>

        
            
<li >
    <a href="../extensions/editor/richtext/">Richtext</a>
</li>

        
            
<li >
    <a href="../extensions/editor/tables/">Tables</a>
</li>

        
            
<li >
    <a href="../extensions/editor/tree-notation/">Tree Notation</a>
</li>

        
            
<li >
    <a href="../extensions/editor/widgets/">Widgets</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Generator</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../extensions/generator/plaintext-gen/">Plaintext Generator</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Other</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../extensions/other/langvis/">Language Visualizer</a>
</li>

        
            
<li >
    <a href="../extensions/other/project-view/">Project View</a>
</li>

        
            
<li >
    <a href="../extensions/other/shadow-models/">Shadow Models</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../extensions/stubs/">Stubs</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Utilities</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../extensions/utils/intentions-menu/">Intentions Menu</a>
</li>

        
            
<li >
    <a href="../extensions/utils/model-listener/">Model Listener</a>
</li>

        
            
<li >
    <a href="../extensions/utils/hacks/">Hacks</a>
</li>

        
            
<li >
    <a href="../extensions/utils/model-merger/">Model Merger</a>
</li>

        
            
<li >
    <a href="../extensions/utils/node-versioning/">Node Versioning</a>
</li>

        
            
<li >
    <a href="../extensions/utils/serializer/">Serializer</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../Migrating/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../extensions/all/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/jetbrains/mps-extensions/edit/master/docs/adding.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#adding-a-new-mps-extension">Adding a new MPS Extension</a></li>
            <li class="second-level"><a href="#check-if-a-new-extension-is-really-needed">Check if a new extension is really needed</a></li>
                
            <li class="second-level"><a href="#checklist-for-adding-a-new-extension">Checklist for adding a new extension</a></li>
                
                <li class="third-level"><a href="#copy-your-extension-into-the-repository-and-add-to-the-mps-project">Copy your extension into the repository and add to the MPS project</a></li>
                <li class="third-level"><a href="#add-to-build-solution">Add to build solution</a></li>
                <li class="third-level"><a href="#make-a-pull-request">Make a pull request</a></li>
                <li class="third-level"><a href="#manually-upload-a-build-of-your-extensions-plugins-to-the-jetbrains-plugin-repository">Manually upload a build of your extension's plugin(s) to the JetBrains plugin repository</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="adding-a-new-mps-extension">Adding a new MPS Extension</h1>
<p>If you want to add a new (or earlier developed existing) extension to MPS Extensions, the guidelines described here should help you.
Note: the process of adding a new plugin is very similar to the process of <a href="../Migrating/">migrating</a> (which is very well-documented). This text repeats some of these steps less rigorously and adds all the steps needed for a new plugin.
Note2: if you add a new extension, all this extension's code will be licensed under Apache 2.0 license.</p>
<h2 id="check-if-a-new-extension-is-really-needed">Check if a new extension is really needed</h2>
<p>If you have functionality that may already fit well under an existing extension, consider merging your extension's functionality into that existing extension. If the functionality of the extension you want to add doesn't fit under any of the existing extensions, and you know well where and how you want to add the extension, you can just open a pull request that adds your new extension (but please observe the <a href="#checklist-for-adding-a-new-extension">checklist</a>).
If you are unsure how or where to start, you can open an issue and discuss/ask via that issue.</p>
<h2 id="checklist-for-adding-a-new-extension">Checklist for adding a new extension</h2>
<p>This checklist explains what you have to do to add a new extension fully and properly to the MPS Extensions.</p>
<h3 id="copy-your-extension-into-the-repository-and-add-to-the-mps-project">Copy your extension into the repository and add to the MPS project</h3>
<p>We assume that you have developed the extension you want to add in its own MPS Project. If not, you should first isolate it and make sure that it can work by itself. If your extension has dependencies to one of the plugins in MPS Extensions, you could either get this dependency from a Maven repository (like Itemis Nexus) or develop the extension in its entirety in a fork of MPS Extensions.
If you want to develop your extension from scratch in a fork, you can just skip this section and add the (plugin) solution(s) and/or language(s) that comprise your extension directly to the MPS project that lives under the <code>code</code> folder.</p>
<p>Before you start, make sure that you have clean MPS models (without any classes_gen and source_gen folders).
To copy or start your extension in the right place in the repository:
* Create a subfolder with the name of your extension under the <code>code</code> directory: <code>code/&lt;extension_name&gt;</code>, e.g. <code>code/plaintextgen</code> for the already existing plaintextgen extension and copy the folders languages (if any) and solutions (if any) of your new extension to <code>code/&lt;name&gt;</code>. See section <em>Move the Files</em> under <a href="../Migrating/">migration</a> for more detailed instructions.
* Open the MPS project living under the <code>code</code> folder, add the languages and solutions of your extension to it, and group all the added solutions and/or languages in a virtual folder that has the name of your extension. See section <em>Adding the Files to the Project</em> of <a href="../Migrating/">migration</a> for more detailed instructions.
* In order to have proper license information in a custom version of MPS with the MPS Extensions included (soon to be downloadable from the JetBrains MPS site), add an <code>about.txt</code> file under the root of your extension's folder (similar like the plaintextgen has an <code>about.txt</code> under <code>code/plaintextgen/about.txt</code>). If your extension doesn't depend on any external software, you can indicate that in the <code>about.txt</code> (see the example of plaintextgen). If you are using third-party libraries or other software, the <code>about.txt</code> must attribute the licenses of this third-party software (an example of such attribution can be found in the <a href="https://github.com/JetBrains/MPS/blob/master/about.txt">about.txt of MPS itself</a>).</p>
<h3 id="add-to-build-solution">Add to build solution</h3>
<p>This step is needed so that your extension is built into a plugin and deployed to Maven repositories (like Itemis Nexus or mbeddr github packages), the JetBrains plugin repository, and the MPS download with MPS Extensions included.
Detailed instructions can be found in section <em>Adding it to the Build</em> of <a href="../Migrating/">migrating</a>, but below are some extra steps you need to observe with a new extension:</p>
<ul>
<li>In order to allow for automatic uploading to the JetBrains plugin repository, make sure you fill in the fields <code>description</code>, <code>version</code>, and <code>vendor</code> properly in the <code>idea plugin</code> section of the build script. Don't leave them empty!</li>
<li>To package the <code>about.txt</code> with the plugin artifact, add a <code>file</code> entry to the <code>plugin</code> section of your extension's plugin(s). As an example, we show the <code>about.txt</code> file entry of plaintextgen:
<img alt="about.txt example of plaintextgen" src="../adding_img/plaintextgen_about_txt_layout_example.png" /></li>
</ul>
<h3 id="make-a-pull-request">Make a pull request</h3>
<p>Please refer of section <em>Sending the Pull Request</em> of <a href="../Migrating/">migrating</a> for detailed instructions, but skip the last part about the <code>migration</code> label.</p>
<h3 id="manually-upload-a-build-of-your-extensions-plugins-to-the-jetbrains-plugin-repository">Manually upload a build of your extension's plugin(s) to the JetBrains plugin repository</h3>
<p>Because the upload of a new plugin to the JetBrains plugin repository has a manual quality check step, you need to upload the plugin(s) of your extension the first time manually. After you have done this, an automated deployment process at JetBrains will completely take care of automatic deployment of new versions (upon migration to newer MPS versions) to the plugin repository.
To manually upload your plugin(s) (assuming that you have executed the <code>./gradlew</code> (or <code>gradlew.bat</code>) build step as part of integrating into the build as instructed in the previous section), do the following:
* Edit the <code>plugin.xml(s)</code> of your plugin(s) artifact(s) (e.g. for plaintextgen that is <code>artifacts/de.itemis.mps.extensions/com.dslfoundry.plaintextgen/META-INF/plugin.xml</code>) to include idea_version: add a tag to the plugin.xml(s) that reads:
  &lt;<code>idea-version since-build="$current_mps_build" until-build="$next_mps_build" /&gt;</code>, where <code>$current_mps_build</code> and <code>$next_mps_build</code> are formatted based on the MPS version: if your MPS version is <code>LCDY.V.S</code> (where L=millennium, C=century, D=decade, Y=year, V=major version in year, and S=minor version), then the build is <code>DYV.S</code>. So for MPS 2021.1.1, the idea_version tag would look as follows:
  <code>&lt;idea-version since-build="211.1" until-build="212.1" /&gt;</code></p>
<ul>
<li>Compress the folder(s) of your plugin(s) into zip(s), e.g. for plaintextgen, the folder <code>artifacts/de.itemis.mps.extensions/com.dslfoundry.plaintextgen</code> must be zipped into <code>com.dslfoundry.plaintextgen.zip</code></li>
<li>Upload the zip file(s) to <a href="https://plugins.jetbrains.com/">the JetBrains plugin repository</a> (if you haven't already, you need to create a JetBrains account for this):
<img alt="upload plugin" src="../adding_img/jetbrains_plugin_repository_upload_plugin.png" /></li>
<li>Set license to <code>Apache 2.0</code>:
    <img alt="apache license" src="../adding_img/jetbrains_plugin_repository_license.png" /></li>
<li>
<p>Set tag to <code>MPS</code>:
  <img alt="tag mps" src="../adding_img/jetbrains_plugin_repository_tag.png" /></p>
</li>
<li>
<p>After upload, press <code>Edit Section</code> of your newly uploaded plugin:
<img alt="edit section" src="../adding_img/jetbrains_plugin_repository_edit_section.png" /></p>
</li>
<li>
<p>Then add author <code>MPS extensions</code> (if you want you can remove yourself as author):
<img alt="add mpsextensions author" src="../adding_img/jetbrains_plugin_repository_select_mps_extensinos_user.png" /></p>
</li>
</ul></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        
        
    </footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../js/bootstrap-3.0.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '..';
    </script>
    <!-- <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script> -->
    <script src="../js/base.js"></script>
    <script src="../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
