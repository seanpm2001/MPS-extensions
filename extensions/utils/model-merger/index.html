<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Extensions and utilities for MPS">  
    <link rel="canonical" href="https://jetbrains.github.io/MPS-extensions/extensions/utils/model-merger/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">

    
    <title>Model Merger - MPS Extensions</title>
    

    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/3.003/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../../css/base.min.css" rel="stylesheet">
    <link href="../../../css/cinder.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.min.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.6.28/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="../../..">MPS Extensions</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../../building/">Building</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../../contributing/">Contributing</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../../Migrating/">Migrating</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../../adding/">Adding</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extensions <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../all/">Full Extension List</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Base Language Extensions</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../bl-extensions/structure-check/">Structure Check</a>
</li>

        
            
<li >
    <a href="../../bl-extensions/blutil/">Base Language Util (blutil)</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Editor</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../editor/celllayout/">Cell Layout</a>
</li>

        
            
<li >
    <a href="../../editor/conditional-editor/">Conditional Editor</a>
</li>

        
            
<li >
    <a href="../../editor/diagrams/">Diagrams</a>
</li>

        
            
<li >
    <a href="../../editor/grammar-cells/">Grammar Cells</a>
</li>

        
            
<li >
    <a href="../../editor/math/">Math</a>
</li>

        
            
<li >
    <a href="../../editor/mouse-selection/">Intentions for custom selections</a>
</li>

        
            
<li >
    <a href="../../editor/multiline/">Multiline</a>
</li>

        
            
<li >
    <a href="../../editor/querylist/">Query List</a>
</li>

        
            
<li >
    <a href="../../editor/richtext/">Richtext</a>
</li>

        
            
<li >
    <a href="../../editor/tables/">Tables</a>
</li>

        
            
<li >
    <a href="../../editor/tree-notation/">Tree Notation</a>
</li>

        
            
<li >
    <a href="../../editor/widgets/">Widgets</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Generator</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../generator/plaintext-gen/">Plaintext Generator</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Other</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../other/langvis/">Language Visualizer</a>
</li>

        
            
<li >
    <a href="../../other/project-view/">Project View</a>
</li>

        
            
<li >
    <a href="../../other/shadow-models/">Shadow Models</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../stubs/">Stubs</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Utilities</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../intentions-menu/">Intentions Menu</a>
</li>

        
            
<li >
    <a href="../model-listener/">Model Listener</a>
</li>

        
            
<li >
    <a href="../hacks/">Hacks</a>
</li>

        
            
<li class="active">
    <a href="./">Model Merger</a>
</li>

        
            
<li >
    <a href="../node-versioning/">Node Versioning</a>
</li>

        
            
<li >
    <a href="../serializer/">Serializer</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../hacks/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../node-versioning/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/jetbrains/mps-extensions/edit/master/docs/extensions/utils/model-merger.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#model-merger">Model merger</a></li>
            <li class="second-level"><a href="#properties">Properties</a></li>
                
            <li class="second-level"><a href="#children">Children</a></li>
                
            <li class="second-level"><a href="#references">References</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="model-merger">Model merger</h1>
<p><strong>Language Namespace :</strong> <code>de.itemis.model.merge</code></p>
<p>Integration of MPS models with external data poses some challenges. One step is to write a custom importer which converts
the external data to a fresh MPS model. But what about an old MPS-Model which you have imported before? From the same external data source! 'ModelMerger' aims to facilitate this task by providing a DSL for defining Merge-Actions across the Concepts of languages. It can then be used to automatically merge an imported model from external data into an already present model.</p>
<p>Two model merger languages exist. <code>de.itemis.model.merge</code> is the new one and is explained in this document. The old
language is deprecated.</p>
<p>This language allows merging models based on merging policies. In the following explanations the term <em>left</em> refers to
 one aspect of the first model that should be merged, the term <em>right</em> to the same aspect in a second model. Create a new root node of concept <a href="http://127.0.0.1:63320/node?ref=r%3A58892eeb-9059-4684-af0a-e0f5f7f9800d%28de.itemis.model.merge.structure%29%2F1912777765298163335">ModelMerge</a>. The main language 
has to be defined. If there are additional languages involved, they can be specified as well. Now, merge policies can be defined
for different concepts. The concepts need to be identifiable by a unique ID, for example, by an ID property. The scope
of the uniqueness property depends on the context where the model merger is used. Normally, it's the project scope but
there are cases where the ID needs to be globally unique.</p>
<p>The model merge can be executed by creating a <a href="http://127.0.0.1:63320/node?ref=r%3A58892eeb-9059-4684-af0a-e0f5f7f9800d%28de.itemis.model.merge.structure%29%2F6402745832171993510">ModelMergeExecution</a> node and using the intention <code>Run Model Merge</code> or call the <code>execute</code> method 
programmatically.</p>
<ul>
<li><strong>Left</strong>: a model pointer to the first model</li>
<li><strong>Right</strong>: a model pointer to the second model</li>
<li><strong>Result</strong>: a model pointer to a model where the results should be saved. When no model is referenced, the left model
 will be overridden.</li>
<li><strong>Merge Policy</strong>: the policy that should be applied to the left and right model</li>
</ul>
<h2 id="properties">Properties</h2>
<p>For properties, three options are possible: </p>
<ul>
<li><strong>Left</strong>: use the value of the left property, and discard the value of the right property.</li>
<li><strong>Right</strong>: use the value of the right property, and discard the value of the right property.</li>
<li><strong>Manual</strong>: a custom merger that must return a value of the same type as the property</li>
</ul>
<h2 id="children">Children</h2>
<p>For child nodes a policy container can be added.</p>
<ul>
<li><strong>Elements exists only on left side</strong> <ul>
<li><strong>Keep</strong>: keep the element</li>
<li><strong>Drop</strong>: drop item</li>
</ul>
</li>
<li><strong>New element on the right</strong>: <ul>
<li><strong>Add</strong>: add the element</li>
<li><strong>Drop</strong>: drop item</li>
</ul>
</li>
<li><strong>Element on both sides</strong><ul>
<li><strong>Drop</strong>: drop item if conflicts occur</li>
<li><strong>Left</strong>: keep the left node, and discard the right node</li>
<li><strong>Right</strong>: keep the right node and discard the left node</li>
<li><strong>Auto</strong>: use the existing merge policies of the children</li>
<li><strong>ManualColl</strong>: a custom merger that must return a node of the same type as the concept</li>
</ul>
</li>
</ul>
<h2 id="references">References</h2>
<p>For references, three options are possible:</p>
<ul>
<li><strong>Left</strong>: use the reference of the left node, and discard the reference of the right node.</li>
<li><strong>Right</strong>: use the reference of the right node and discard the reference of the left node.</li>
<li><strong>Manual</strong>: a custom merger that must return a node of the same type as the referenced node's concept</li>
</ul></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
        
        
    </footer>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../../..';
    </script>
    <!-- <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script> -->
    <script src="../../../js/base.js"></script>
    <script src="../../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
